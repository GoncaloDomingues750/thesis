{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyReports=()=>{const[reports,setReports]=useState([]);const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem(\"token\");fetch(\"http://localhost:8000/api/list_reports\",{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>res.json()).then(data=>setReports(data)).catch(err=>alert(\"Failed to fetch reports: \"+err));},[]);const download=(fileId,filename)=>{fetch(\"http://localhost:8000/api/download_report/\".concat(fileId)).then(res=>res.blob()).then(blob=>{const url=window.URL.createObjectURL(blob);const link=document.createElement(\"a\");link.href=url;link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCC4 My Reports\"}),/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:()=>navigate(\"/dashboard\"),children:\"\\u2190 Back to Dashboard\"})]}),reports.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No reports found.\"}):/*#__PURE__*/_jsx(\"ul\",{children:reports.map(r=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:r.filename}),\" (\",new Date(r.upload_date).toLocaleString(),\")\",\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>download(r.file_id,r.filename),children:\"Download\"})]},r.file_id))})]});};export default MyReports;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","MyReports","reports","setReports","navigate","token","localStorage","getItem","fetch","headers","Authorization","concat","then","res","json","data","catch","err","alert","download","fileId","filename","blob","url","window","URL","createObjectURL","link","document","createElement","href","body","appendChild","click","removeChild","className","children","onClick","length","map","r","style","marginBottom","Date","upload_date","toLocaleString","file_id"],"sources":["C:/Users/Gon√ßalo Domingues/Documents/Tese/Project2/frontend/src/components/MyReports.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst MyReports = () => {\r\n  const [reports, setReports] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    fetch(\"http://localhost:8000/api/list_reports\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => setReports(data))\r\n      .catch(err => alert(\"Failed to fetch reports: \" + err));\r\n  }, []);\r\n\r\n  const download = (fileId, filename) => {\r\n    fetch(`http://localhost:8000/api/download_report/${fileId}`)\r\n      .then(res => res.blob())\r\n      .then(blob => {\r\n        const url = window.URL.createObjectURL(blob);\r\n        const link = document.createElement(\"a\");\r\n        link.href = url;\r\n        link.download = filename;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <div className=\"dashboard-header\">\r\n        <h2>üìÑ My Reports</h2>\r\n        <button className=\"back-button\" onClick={() => navigate(\"/dashboard\")}>\r\n          ‚Üê Back to Dashboard\r\n        </button>\r\n      </div>\r\n\r\n      {reports.length === 0 ? (\r\n        <p>No reports found.</p>\r\n      ) : (\r\n        <ul>\r\n          {reports.map(r => (\r\n            <li key={r.file_id} style={{ marginBottom: \"1rem\" }}>\r\n              <strong>{r.filename}</strong> ({new Date(r.upload_date).toLocaleString()}){\" \"}\r\n              <button onClick={() => download(r.file_id, r.filename)}>Download</button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyReports;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}